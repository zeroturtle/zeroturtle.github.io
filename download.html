<?php
  require __DIR__ . '/auth/src/bootstrap.php';

  inactivity_time();
  require_login();


function human_filesize($bytes, $decimals = 2) {
    $factor = floor((strlen($bytes) - 1) / 3);
    if ($factor > 0) $sz = 'KMGT';
    return sprintf("%.{$decimals}f", $bytes / pow(1024, $factor)) . @$sz[$factor - 1] . 'B';
}
function line($Num) {
  $files = [
    ['optimus-5.3.0.15-full.zip','Optimus v5.3 "Pegasus" full pack, Русский/English','zip'],
    ['','','x'],
    ['optimus-5.3.0.15-core.zip','Optimus v5.3 "Pegasus" core files, Русский/English','zip'],
    ['','','x'],
    ['Reports_ru.zip','Русский','zip'],
    ['Reports_ua.zip','Українська','zip'],
    ['Reports_en.zip','English','zip'],
    ['Firebird-5.0.2.1613-0-windows-x86.zip','Firebird-5.0.2.1613-0-windows-x86.zip','zip'],
    ['Firebird-5.0.2.1613-0-windows-x86.exe','Firebird-5.0.2.1613-0-windows-x86.exe','binary'],
    ['operation_manual_ru.doc','Руководство пользователя DOC, Русский','word'],
    ['operation_manual_ru.pdf','Руководство пользователя PDF, Русский','pdf'],
    ['training_fs_ru.doc','Методичка FS, Русский','word'],
    ['training_fs_ua.doc','Методичка FS, Українська','word'],
    ['training_gs_ru.doc','Методичка организация соревнований, Русский','word'],
    ['','',''],
  ];
  $filename = './downloads/'.$files[$Num][0];
  if (file_exists($filename)) {
    echo '<i class="bi bi-file-'.$files[$Num][2].'"></i> '.
       '<a href="'.$filename.'">'.$files[$Num][1].'</a>  <span class="text-secondary text-nowrap m-3"><small>'.
         date ("j-M-Y", filectime($filename)).' - '.human_filesize(filesize($filename),2).'</small></span>';
  } else {
    echo "<i class='text-danger'>file $filename doesn't exists</i>";
  }
}
?>

<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <title>OPTIMUS Client Assistant</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
<style>
.contribute {
  /* 🌈 Энергичный фон */
  background: radial-gradient(circle at 25% 50%, #c3f0ff 0%, #ffffff 45%, #f0fbff 100%);
  border-radius: 16px;
  box-shadow: 0 0 25px rgba(0, 180, 216, 0.18),
              0 0 60px rgba(0, 180, 216, 0.08);
  overflow: hidden;
  transition: transform 0.3s ease, box-shadow 0.4s ease;
}
.contribute ul i {
  margin: 0.7rem 1.0rem;
  font-size: 1.5rem;  /* Иконки чуть крупнее текста */
  color: #0d6efd; /* Bootstrap primary */
}
footer.light-energy {
  background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 80%, #dee2e6 100%);
  color: #212529;
  padding: 2.5rem 1rem;

  border-top: 1px solid #dee2e6;
  box-shadow: 0 -2px 10px rgba(13, 110, 253, 0.05);
}
.footer-nav a {
  margin: 0 0.9rem;
  text-decoration: none;
  color: #495057;
  font-weight: 500;
  transition: color 0.25s ease, text-shadow 0.25s ease;
}

.footer-nav a:hover {
  color: #0d6efd;
  text-shadow: 0 0 6px rgba(13, 110, 253, 0.3);
}
.footer-social {
  margin: 1rem 0;
}

.footer-social a {
  font-size: 2.0rem;
  color: #6c757d;
  transition: color 0.3s ease, transform 0.3s ease;
}

.footer-social a:hover {
  color: #0d6efd;
  transform: scale(1.1);
}

</style>
  </head>
  <body lang="en">

<div class="container">
     <!-- page header -->
    <header class="" style="background-image: url(images/Title.jpg); background-size: 100% auto;">
    <!--div style="background: linear-gradient(#b35900 55%, white);"-->
        <div class="row align-items-center">
           <div class="col">
		<a href="about.html"><img src="images/turtleZ_color.png" alt="LOGO" class="float-start m-3" height="100px"></a>
                <div class="m-3"><span class="fs-1 fw-bold">OPTIMUS</span>  </div>
           </div>
           <div class="col m-3 text-end">
		<?php if(!is_user_logged_in()) { ?>
			<a href="auth/login.php" class="btn btn-outline-dark pull-right text-nowrap" role="button">Sign In</a>
		<?php } else { ?>
	                <a href="auth/logout.php" class="btn btn-outline-dark pull-right text-nowrap" >Logout, <?php echo htmlspecialchars($_SESSION['username'], ENT_QUOTES)?></a>
		<?php } ?>
           </div>
         </div>
    </header>



<p class="display-4">OPTIMUS <span class="text-success">Support Center</span></p>
<section id="download" class="border-bottom py-3 bg-secondary-subtle">
  <div class="mx-3">
    <div class="row">
      <div class="col-sm-6">
        <p><strong>Current build 5.3.0.15 </strong></p>
        <span class="h3 text-center">Download Full package: </span>
        <ul>
          <li><?php line(0); ?> <br> <small><a href="#whatsnew">Read release notes</a> </small> </li>
        </ul>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-sm-6">
        <span class="h3 text-center">Components: </span>
        <ul>
          <li>
            <span>Core files <small>(exe & dll, fdb)</small>:  
              <ul>
                <li><?php line(2); ?> </li>
              </ul>
            </span>
          </li>
          <li>
            <span>Print templates:
              <ul>
                <li><?php line(4); ?> </li>
                <li><?php line(5); ?> </li>
                <li><?php line(6); ?> </li>
              </ul>
            </span>
          </li>
          <li>
            <span>Firebird SQL server x86 v5.0.2:<br>  
              <small>(You can download it from the official website <a href="https://www.firebirdsql.org/en/firebird-5-0" class="text-decoration-none"> The Firebird Project</a>)</small> 
              <ul>
                <li><?php line(7); ?> </li>
                <li><?php line(8); ?> </li>
              </ul>
            </span>
          </li>
        </ul>
      </div>
      <div class="col-sm-6">
        <span class="h3 text-center">Documentation:</span><br>
        <ul>
          <li>
            <span> OPTIMUS operational manual:   
              <ul>
                <li><?php line(9); ?> </li>
                <li><?php line(10); ?> </li>
              </ul>
          </li>
          <li>
            <span> Formation Skydiving guide: 
              <ul>
                <li><?php line(11); ?> </li>
                <li><?php line(12); ?> </li>
              </ul>
            </span>
          </li>
          <li>
            <span> Organizing competition guide:  
              <ul>
                <li><?php line(13); ?> </li>
              </ul>
            </span>
          </li>
        </ul>
      </div>
    </div>
    <hr>
    <p><small>
      Runs on Windows 7 or later.  There are no macOS or Linux version planned. <br>
      No admin rights required.  No installation or external software dependencies. 
     </small>
    </p>
  </div>
</section>

<section id="guide" class="border rounded-4 text-center my-5">
  <div class="container text-center">
    <style scoped>
      .step-card {
        background-color: var(--bs-light);
        border: 1px solid var(--bs-border-color);
        border-radius: 1rem;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
    </style>
    <p class="display-4"><span class="text-danger">Activation</span> guide</p>
    <p>Follow these 3 simple steps to set up and start using your judging toolkit—all within minutes.</p>

    <div class="row justify-content-center g-4 text-start text-md-center">
      <div class="col-12 col-md-4">
        <div class="step-card p-4 h-100">
          <div><i class="bi bi-1-circle-fill fs-1 text-primary"></i></div>
          <h5 class="mt-3 fw-semibold">Download the System</h5>
          <p class="text-secondary small mb-0">
            Get the latest Windows build from the <a href="download.html" class="link-primary pe-none">Download page</a>.
            No installation required — just unpack and run.
          </p>
        </div>
      </div>
  
      <div class="col-12 col-md-4">
        <div class="step-card p-4 h-100">
          <div><i class="bi bi-2-circle fs-1 text-primary"></i></div>
          <h5 class="mt-3 fw-semibold">Generate Your License</h5>
          <p class="text-secondary small mb-0">
            Use the <a href="licence.html" class="link-primary">License Constructor</a> to configure your plan.
            Choose options, generate key, and download your license file.
          </p>
        </div>
      </div>
  
      <div class="col-12 col-md-4">
        <div class="step-card p-4 h-100">
          <div><i class="bi bi-3-circle fs-1 text-primary"></i></div>
          <h5 class="mt-3 fw-semibold">Activate and Start</h5>
          <p class="text-secondary small mb-0">
            Launch the app and activate your license file.  
            You’re ready to judge, manage events, and share results instantly.
          </p>
        </div>
      </div>
    </div>
    <div class="row justify-content-center m-3 p-2">
      <div class="w-75 border border-3">
        <div class="text-center">
          <h5>Support & Help</h5>
          If you have any questions or issues, please  <a href="contact.html">contact us</a>.
          We are always ready to assist you.
        </div>
      </div>
    </div>
  </div>
</section>



<section class="py-3 contribute">
  <div class="row m-3">
    <div class="d-flex align-items-center flex-column-reverse flex-md-row">
      <div class="col-sm-8 m-3 text-md-start">
        <p class="display-4">How you can <span class="text-danger">contribute…</span></p>
        <p>OPTIMUS keeps growing with help from judges, developers, and competition organizers worldwide.  Your feedback shapes new features and improvements.</p>
        <ul class="list-unstyled">
          <li><i class="bi bi-chat-dots"></i><strong>Share Your Experience</strong><br>
            Want to get more involved in the Optimus community? Send your feedback, ideas, and feature requests. Help us make judging more efficient for everyone.</li>
          <li><i class="bi bi-people"></i><strong>Collaborate</strong><br>
            Are you a developer or national federation representative?  Partner with us to extend OPTIMUS’ reach.</li>
          <li><i class="bi bi-puzzle"></i><strong>Become a Beta Tester</strong><br>
            Get early access to new judging tools and help validate workflows before release. (No coding required)</li>
          <li><i class="bi bi-translate"></i><strong>Translate content</strong> <br>
            Help us translate Optimus products into your local language.</li>
        </ul>
      </div>
      <div class="col-sm-4 mt-md-0">
        <img src="images/6.png" style="max-width: 100%;" alt="subscibe">
      </div>
    </div>
  </div>
</section>



<section id="whatsnew" class="border-bottom py-3">
  <p class="display-4"><span class="text-danger">OPTIMUS</span> evolution</p>
  <p>Interested in the full development history?  
     Read the complete changelog covering all updates, fixes, and feature milestones.</p>
  <div id="fileContent" class="mx-3 border bg-info-subtle"><a href="#" id="history"><i class="bi bi-journal-richtext fs-4"></i> Release Notes</a></div>
   <script>
     async function loadFile(filePath) {
       try {
         const response = await fetch(filePath);
         const fileContent = await response.text();
         return fileContent;
       } catch (error) {
         console.error("Ошибка загрузки файла:", error);
         return null;
       }
     }
     const fileInput = document.getElementById('history');
     fileInput.addEventListener('click', (event) => {
       event.preventDefault();
       //const fileContent = loadFile("https://localhost/whatsnew");
       loadFile("https://zeroturtle.github.io/whatsnew").then(fileContent => {
          if (fileContent) {
            let divElement = document.getElementById("fileContent");
            divElement.innerHTML = `<pre>${fileContent}</pre>`;
          }
       })
     });
   </script>
</section>


<footer class="py-3 my-4 light-energy">
  <div class="row">
    <div class="col-sm m-4">
      <div> <img src="images/turtleZ-bw.svg" style="height:2.2rem; float:left;">  &copy  2008-2025 &nbsp;<span class="h4 fw-bold"> Zeroturtle</span></div>
      <div class="align-bottom h4 footer-social">
        <ul class="list-inline">
          <li class="list-inline-item"><a href="https://www.facebook.com/groups/399304463592210"><i class="bi bi-facebook"></i></a></li>
          <li class="list-inline-item"><a href="#"><i class="bi bi-instagram"></i></a></li>
          <li class="list-inline-item"><a href="#"><i class="bi bi-twitter-x"></i></a></li>
          <li class="list-inline-item"><a href="#"><i class="bi bi-telegram"></i></a></li>
        </ul>
      </div>
      <div class="align-bottom footer-nav">
         <a data-bs-toggle="modal" data-bs-target="#privatPolicy" href="#">Privacy</a>|<a href="#">Terms of use</a>|<a href="#">Cookie</a>
      </div>
    </div>
    <div class="col-sm m-4 footer-nav">
      <h4 class="">Quick Links</h4>
      <ul class="list-unstyled">
        <li class="mb-2"><a href="about.html">About</a> <!--span>— Learn what OPTIMUS can do</span--></li>
        <li class="mb-2"><a href="download.html">Download</a> <!--span>— Try the demo version</span--></li>
        <li class="mb-2"><a href="licence.html">License</a> <!--span>— Choose your plan</span--></li>
        <li class="mb-2"><a href="contact.html">Contact</a> <!--span>— Get in touch</span--></li>
      </ul>
    </div>
  </div>
</footer>


</div> <!--container-->

  </body>
</html>