<!DOCTYPE html>
<html lang="en" data-critters-container>
  <head>
    <meta content="text/html; charset=windows-1251" http-equiv="content-type">
    <meta charset="utf-8s">
    <title></title>
    <base href="/">
    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="icon" type="image/x-icon" href="favicon.png">
<style>
::backdrop {
  background: rgba(0,0,0,0.7);
  opacity: 0.75;
}
</style>

  </head>
  <body id="Body">
   <h3> Resulting Table: </h3>
   <div id="container"></div>

<dialog>
  <p class="close" onclick="closedialog();">X</p>
  <p id="popup-content">This modal dialog has a groovy backdrop!</p>
</dialog>

   <hr>
    <script>
	const modal = document.querySelector('dialog');
	function closedialog() {
		modal.close();
	};

	function windowOnClick(event) {
		if (event.target === modal) {
			closedialog();
		}
	}
	window.addEventListener("click", windowOnClick); 

	window.addEventListener("load", (event) => {
		fetch('https://raw.githubusercontent.com/zeroturtle/zeroturtle.github.io/main/proto.html')
		.then(response => response.text())
		.then((data) => {
			container.innerHTML= data;
			for (lnk of document.getElementsByTagName('a')) {
				lnk.addEventListener("click", f);
			}
/*			for (cell of document.querySelectorAll('td')) {
				let col = cell.cellIndex-2;
				if ( col>0 && col<12 && cell.parentElement.rowIndex>5 ) {
					cell.addEventListener("click", f);
					cell.setAttribute('id',  `${cell.parentElement.cells[2].innerText.substring(0,3)}-${cell.cellIndex-2}.html`);
				}
			}
*/
		})
	});
function f () {
	event.preventDefault();
//	fetch('https://raw.githubusercontent.com/zeroturtle/zeroturtle.github.io/main/'+this.getAttribute('id'))
	let url = new URL(this+'.html', 'https://raw.githubusercontent.com/zeroturtle/zeroturtle.github.io/main/');
	fetch(url)
		.then(response => response.text())
		.then((data) => {
			document.getElementById('popup-content').innerHTML = data;
		})
		.catch(error => console.error('Error fetching file:', error));
	modal.showModal();
}
    </script>


<script>
// на onclick сохранить параметры ссылки в Ѕƒ
var links = document.getElementsByTagName('a');
for (var i = 0; i < links.length; i++) {
  links[i].addEventListener("click", function() {
	let url = new URL(this); 
// длительность (врем€ нахождени€ на странице) текущей сессии в ms 
	let len = new Date().getTime() - window.performance.timing.domContentLoadedEventEnd;
	window.location.href='https://skydive.dp.ua/saveHit.php?url=' + url + '&len=' + len;
alert(len);
  });
}
</script>

  </body>
</html>