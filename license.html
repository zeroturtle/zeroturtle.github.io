<?php
  require __DIR__ . '/auth/src/bootstrap.php';
  inactivity_time();
?>

<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <title>OPTIMUS Licensing Service</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <style>
  /* свечение для .btn-dark */
  .btn-outline-dark.glow {
    box-shadow:
      0 0 10px rgba(138,43,226,0.8),
      0 0 20px rgba(0, 180, 255, 0.6);
  }
    </style>
    <script>
      function updatePrice() {         
        const disciplines = document.getElementById('disciplines')
        const checkboxes = disciplines.querySelectorAll('input[type="checkbox"]')  //найти все checkbox в блоке disciplines
        const actionButton = document.getElementById('actionButton')
        const planLabel = document.getElementById('planLabel');

         const plan = document.querySelector('input[name="plan_type"]:checked').value;
         if (plan === 'free') { //free
           planLabel.textContent = 'Free plan';
           actionButton.textContent = 'Start for free';
           checkboxes.forEach(cb => {
             //cb.disabled = true
             cb.checked = true
           });
           single.style.display = 'block'
           site.style.display = 'none'
         } else { //custom
           checkboxes.forEach(cb => cb.disabled = false);
           planLabel.textContent = 'Custom plan';
           actionButton.textContent = 'Subscribe now';
           single.style.display = 'none'
           site.style.display = 'block'
         }
         actionButton.disabled = !(Array.from(checkboxes).some((cb) => cb.checked == true))
         // подсчитать стоимость 
         const form = document.forms["myForm"]
         /*правильно делать запрос через GET, непонятно как взять параметры в subscribe?
         let params = new URLSearchParams(new FormData(form)).toString();
         fetch(location.origin + `/price.php?${params}`)*/
         const formData = new FormData(form)
         fetch(location.origin + '/price.php', {
             method: "POST",
             body: formData,
         })
         .then(response => response.text())
         .then(data => {
             document.getElementById("totalPrice").innerHTML = `${Math.trunc(data)}<sub>${String(data % 1).substr(1,3)}</sub>`
         })
         .catch((error) => {
            // Handle error
           console.log("error ", error);
         });
       }

        window.addEventListener("load", (event) => {
          const disciplines = document.getElementById('disciplines')
          const checkboxes = disciplines.querySelectorAll('input[type="checkbox"]')  //найти все checkbox в блоке disciplines
          const planTogler = document.querySelectorAll('input[name="plan_type"]')

          checkboxes.forEach( cb => cb.addEventListener("change", updatePrice))
          planTogler.forEach(r => r.addEventListener('change', updatePrice))
          updatePrice();
        })

    </script>
    <style>
      .configurator {
        display: flex;
        flex-direction: column;
        gap: 20px;
        max-width: 480px;
        margin: 0 auto;
        margin-bottom: 1rem;
        text-align: left;
        background: #fff;
        border: 1px solid rgba(26,42,108,0.1);
        border-radius: 16px;
        padding: 30px;
        box-shadow: 0 4px 20px rgba(26,42,108,0.08);
     }
     .pricing {
        background: linear-gradient(180deg, #ffffff 0%, #f5f8ff 100%);
        text-align: center;
        /*padding: 100px 20px 60px;*/
        border-bottom: 1px solid rgba(0,0,0,0.05);
     }

     .checkmark-list {
        list-style: none; /* Remove default bullets */
        padding-left: 0; /* Remove default padding */
     }
     .checkmark-list li::before {
        content: "\2713";  /* Unicode checkmark character */
        color: green;      /* Color of the checkmark */
        margin-right: 8px; /* Spacing */
     }    
  </style>
  </head>
  <body lang="en">
    
    <div class="container">
       <!-- page header -->
  <header class="" style="background-image: url(images/Title.jpg); background-size: 100% auto;">
  <!--div style="background: linear-gradient(#b35900 55%, white);"-->
      <div class="row align-items-center">
         <div class="col">
		<a href="about.html"><img src="images/turtleZ_color.png" alt="LOGO" class="float-start m-3" height="100px"></a>
              <div class="m-3"><span class="fs-1 fw-bold">OPTIMUS</span>  </div>
         </div>
         <div class="col m-3 text-end">
		<?php if(!is_user_logged_in()) { ?>
			<a href="auth/login.php" class="btn btn-outline-dark glow pull-right text-nowrap" role="button">Sign In</a>
		<?php } else { ?>
	                <a href="auth/logout.php" class="btn btn-outline-dark pull-right text-nowrap" >Logout, <?php echo htmlspecialchars($_SESSION['username'], ENT_QUOTES)?></a>
		<?php } ?>
         </div>
       </div>
  </header>

<p class="display-4">License <span class="text-danger">Configurator</span></p>
<section id="license" class="border pricing">
  <form id="myForm" action="license.php" method="post">
  <div class="row p-3">
        <div class="py-2 text-center">  
            <input type="radio" class="btn-check" name="plan_type" id="option1" value="free" checked>
            <label class="btn btn-outline-primary" for="option1">Personal </label>
            <input type="radio" class="btn-check" name="plan_type" id="option2" value="custom">
            <label class="btn btn-outline-primary" for="option2">Standard </label>
        </div>
  </div>
  <div class="row">
    <div class="col-lg-6">
        <p class="display-6 text-center">Build your plan</p>
        <div class="configurator">
          <div class="d-grid gap-3">
            <input type="hidden" name="years" value=1>
            <!--div>
              <h5 class="text-uppercase">Extend support & upgrade period</h5>
                <div>
                  <input type="radio" class="" name="years" id="year1" value="1">
                  <label class="" for="year1">1 year</label>
                  <input type="radio" class="" name="years" id="year2" value="2">
                  <label class="" for="year2">2 years</label>
                  <input type="radio" class="" name="years" id="year3" value="3">
                  <label class="" for="year3">3 years</label>
                </div>
              <p>One year support and upgrades is included by default. You can extend this period for up to three years with a significant discount.</p>
            </div-->
              <div id="disciplines" class="p-2 d-grid gap-2 text-nowrap">
                <p class="mb-0">Disciplines*: </p>
                <!-- outdoor -->
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox1" name="types[]" value="FS">
                  <label class="form-check-label" for="inlineCheckbox1">Formation Skydiving</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox2" name="types[]" value="SF">
                  <label class="form-check-label" for="inlineCheckbox2">Speed Formation Skydiving</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox3" name="types[]" value="AE">
                  <label class="form-check-label" for="inlineCheckbox3">Artistic Events</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox4" name="types[]" value="CF">
                  <label class="form-check-label" for="inlineCheckbox4">Canopy Formation</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox5" name="types[]" value="WS">
                  <label class="form-check-label" for="inlineCheckbox5">Wingsuit Flying Perfomance</label>
                </div>
                <!-- 
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox6" name="types[]" value="WA" disabled>
                  <label class="form-check-label" for="inlineCheckbox6">Wingsuit Flying Acrobatic</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox7" name="types[]" value="CP" disabled>
                  <label class="form-check-label" for="inlineCheckbox7">Canopy Piloting</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox8" name="types[]" value="SP" disabled>
                  <label class="form-check-label" for="inlineCheckbox8">Speed Skydiving</label>
                </div>
indoor
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox9" name="types[]" value="IF" disabled>
                  <label class="form-check-label" for="inlineCheckbox9">Indoor Formation Skydiving</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox10" name="types[]" value="IS" disabled>
                  <label class="form-check-label" for="inlineCheckbox10">Indoor Solo Freestyle</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox11" name="types[]" value="DS" disabled>
                  <label class="form-check-label" for="inlineCheckbox11">Dynamic Solo Speed</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="inlineCheckbox12" name="types[]" value="DY" disabled>
                  <label class="form-check-label" for="inlineCheckbox12">Dynamic Flying</label>
                </div>
                -->    
              </div> <!-- disciplines -->
        
            <!--div>
              <h5 class="text-uppercase">Cloud video storage</h5>
              <p><input class="form-check-input" type="checkbox" id="" name="cloud">
                 Premium видео выгружаются на cloud (вся стоимость аренды cloud + 15% за обслуживание).</p>
            </div-->
          </div> 
          <div class="border-top text-center">
            <h5 id="planLabel"></h5>
            <div >
              <div id="single" style="display:block"><p class="">Intended to be used individual users for education and training purposes and are for non-commercial use.</p></div>
              <div id="site" style="display:none"><p class="">For an unlimited number of computers within a single company, up to 5 judge consoles.</p> </div>
            </div>
            <div class="fs-3">Total:  &euro;<span id="totalPrice"></span> / year</div>
            <div><small>Price does not include taxes </small></div><br>
          </div>
        </div> <!-- plan -->
    </div>
    <div class="col-lg-6">
        <div class="">
          <p class="display-6 text-center">Details</p>
          <div class="configurator">
            <fieldset>
              <div class="d-grid gap-3">
                <div>
                    <label for="first_name" class="form-label">First Name*: </label>
                    <input type="text" class="form-control" id="first_name" name="first_name" required placeholder="First Name">
                </div>
                <div>
                    <label for="last_name" class="form-label">Last Name*: </label>
                    <input type="text" class="form-control" id="last_name" name="last_name" required placeholder="Last Name">
                </div>
                <div>
                    <label for="email" class="form-label">Email*: </label>
                    <input type="email" class="form-control" id="email" name="email" required placeholder="Email address">
                </div>
                <div>
                    <label for="company" class="form-label">Company: </label>
                    <input type="text" class="form-control" id="company" name="company" placeholder="Company Name">
                </div>
                <div>
                    <label for="jobtitle" class="form-label">Job Title: </label>
                    <input type="text" class="form-control" id="jobtitle" name="jobtitle" placeholder="Type your current job title">
                </div>
              </div>
            </fieldset>
          </div>
        </div> <!-- detail -->
    </div>
  </div> <!-- row -->
  <div class="row">
    <div style="text-align: left; padding: 30px;">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="inlineCheckbox1" name="" value="" required>
        <label class="form-check-label" for="inlineCheckbox1">By filling and submitting this form you understand and agree that the use of OPTIMUS' website is subject to the General Website Terms of Use. I confirm that I will be the only authorized user of the license.</label>
      </div>
    </div>
  </div>
    <p class="text-warning"><?php echo (!empty($err) ? $err : ''); ?></p>
    <button id="actionButton" type="submit" class="btn btn-lg btn-success">&nbsp; Start for free &nbsp;</button>
  </form>
  <p class="text-center p-2">Contact <a href="contact.html" class="link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-75-hover">Our team</a> to move to a more flexible license type.</p>
</section>

<section id="order" class="my-5">
  <div class="bg-warning p-3">
    <small>
      <p>License emailed/sent by e-mail after payment. Secure payments via 2Checkout (SSL).</p>
      <p>Online orders are processed automatically 24/7.</p>
      <p><b>WARNING!</b> Please use a valid email to receive the confidential information. We'll never share your email with anyone else.<br>
          Once you have submitted your request, you will recieve a detailed product licensing information and license file in attachment.</p>
      <p><b>WARNING!</b> Your <b>payment is <span class="text-danger">Non-transferrable.</span></b>, and your service will continue until the end of your contracted term. <br>
         We recommend you check the software with Single license before purchasing Site license as we distribute our products as try-before-you-buy products.</p>
      <p>Licenses are valid for 1 year and a new license can be purchased after the term has expired.</p>
      <p>The subleases, transfer, or commercial resale of the software to third parties is prohibited.</p>
    </small>
  </div>
</section>

<section class="my-5 py-5" style="background: linear-gradient(135deg, #f0f2f5 0%, #ffffff 100%);">
  <div class="container text-center">
    <div class="border d-inline-block px-4 py-3 rounded-4 shadow-sm bg-white">
      <p class="fs-5 mb-0">
        <span class="text-secondary">Already have a license?</span>
        <a href="download.html" class="link-underline link-underline-opacity-0 link-underline-opacity-100-hover ms-2 fw-semibold text-nowrap">
          <i class="bi bi-cloud-arrow-down me-1 align-middle"></i> Get the software 
        </a>
      </p>
      <p class="mt-3 mb-0 small">
        <a href="about.html" class="text-decoration-none text-muted">
          <i class="bi bi-info-circle me-1 align-middle"></i>
          Learn more about OPTIMUS
        </a>
      </p>
    </div>
  </div>
</section>



<section id="subscription" class="my-5">
  <div class="row m-3">
    <div class="d-flex align-items-center flex-column flex-md-row">
      <div class="col order-2 m-3 col-sm-8 md-0">
        <p class="display-4">Purchasing <strong>benefits</strong></p>
	<p>Initial purchase includes annual subscription. One year period means 365 days from subscription's date.</p>
	<p>The subscription-based model provides the following advantages:</p>
	<ul class="checkmark-list">
		<li>No reinstallation or reconfigurations required if you purchase.</li>
		<li>Neither advertising nor nag-window</li>
		<li>All core modules avalable + advanced options</li>
		<li>One year of free software upgrades including new releases, updates and hotfixes even if it is a major version upgrade;</li>
		<li>30 days before a subscription expires, OPTIMUS will send an email notification to alert you to the fact that a new subscription will need to be purchased. 
		An email notification will then again be sent 14 days before a subscription expires. </li>
		<!--li>Significant discounts on multi-year subscriptions.</li-->
		<li>New features by request (except Free-licensed users) will be included in following release and accessible for all OPTIMUS users.</li>
	</ul>
      </div>
      <div class="col order-1 col-sm-4 md-0">
        <img src="images/4.png" style="max-width: 100%;" alt="subscibe">
      </div>
    </div>
  </div>
</section>



<section class="bg-secondary text-light my-5">
  <div class="row m-3">
    <div class="d-flex align-items-center flex-column-reverse flex-md-row">
      <div class="col col-sm-8 m-3 text-md-start">
        <p class="display-4" title="How to report an issue?">Support <strong>Agreement</strong></p>
        <p>
          We provide unlimited email support to all users — including Free tier.
          Requests are handled according to priority and complexity.
        </p>
        <ul class="list-unstyled" title="What details should I include in my request?">
          <li><i class="bi bi-envelope-at text-white-50 fs-4 me-2"></i> <b>Contact Channels:</b> Use <a href="contact.html" class="link-light">Web form</a> or email <a href="mailto:support@yourdomain.com" class="link-light">support@yourdomain.com</a></li>
          <li><i class="bi bi-clock-history text-white-50 fs-4 me-2"></i> <b>Response time:</b> within 24 hours on business days</li>
          <li><i class="bi bi-ui-checks text-white-50 fs-4 me-2"></i> <b>Request Format:</b> To help us assist you faster, please include:
            <ul>
              <li>Event or competition ID</li>
              <li>LicenseID and Short description of the issue</li>
              <li>Screenshots or video if applicable</li>
            </ul>
          </li>
          <li><i class="bi bi-globe text-white-50 fs-4 me-2"></i> <b>Languages:</b> English, French, Russian</li>
        </ul>
      </div>
      <div class="col col-sm-4 md-0 pt-3">
        <img src="images/5.png" style="max-width: 100%;" alt="subscibe">
      </div>
    </div>
  </div>
    <div class="p-3 border border-3">
      <p><strong>Warning!</strong>  Technical support provides for customers with active subscription.</p>
      <p>We operate with the low touch model that means we focus on improving the technology to make the customer experience better.</p>
      <p><i class="bi bi-exclamation-triangle"></i>If you have a problem with OPTMIUS send your request, including a detailed description of the problem you are seeing, making sure you include your license number in the subject line of your message. 
         If you do not include your license number in the subject line, you may not get any kind of reply because of filtering processes we have had to implement in order to control access to the resource.</p>
    </div> 
    <p class="p-3 text-center"><a href="contact.html" class="btn btn-warning">Contact Support</a></p>
</section>



<section id="renew" class="py-3" style="background: linear-gradient(180deg, #f8f9fa 0%, #e9f3ff 100%);">
  <h2 class="display-3">Reasons to <span class="text-danger">renew</span> your license</h2>
  <div class="d-grid gap-3">
    <div>
      <p> Keep your judging system running smoothly with software updates and priority assistance.
      </p>
	<ul class="list-unstyled px-3">
          <li><i class="bi bi-box-fill fs-4 me-2"></i>Following your renewal, It ensures full compatibility with updated competition rules.</li>
          <li><i class="bi bi-cash-coin fs-4 me-2"></i> You can upgrade <strong>Site-license</strong> within an active subscription to the license with a 20% discount. Contact our <a href="mailto:support@optimus.dp.ua">support team</a>. We will provide you with a quote.</li>
          <li><i class="bi bi-exclamation-triangle fs-4 me-2"></i> After the subscription has expired, you will be required to purchase a new 1-year subscription in order to continue having access to any new minor releases and online product support.</li>
          <li><i class="bi bi-award fs-4 me-2"></i> Customers who haven't renewed their subscription and wish to update their version of the system within one year can upgrade for $95 (a license is purchased separately).</li>
	</ul>
        <p class="ms-5"><small><i class="bi bi-asterisk"></i>Compare your maintenance term to the release date of the latest build.  Terms of License you can check in About window.</small></p>
    </div>
  </div>
</section>

<section id="download" class="my-5" style="background-image: radial-gradient(ellipse, Yellow, Orange);">
  <div class="m-3">
    <div class="row align-items-center m-3">
      <div class="col m-3">
        <h3>Haven't you the latest version <b>OPTIMUS </b> yet?</h3>
        <p></p>
        <div class="text-center"><a href="download.html" class="btn btn-lg btn-primary text-nowrap">Download Now</a></div>
        <p>&nbsp;</p>
      </div>
      <div class="col text-center">
        <div class="h1 fw-bold p-3 m-3" style="background:#c7c7c7"><img src="images/turtleZ_color.png" height="100px"><br>OPTIMUS 5.2<br><span class="text-danger"> Artemis</span> release</div>
      </div>
    </div>
  </div>
</section>



<footer class="py-3 my-4 light-energy">
  <div class="row">
    <div class="col-sm m-4">
      <div> <img src="images/turtleZ-bw.svg" style="height:2.2rem; float:left;">  &copy  2008-2025 &nbsp;<span class="h4 fw-bold"> Zeroturtle</span></div>
      <div class="align-bottom h4 footer-social">
        <ul class="list-inline">
          <li class="list-inline-item"><a href="https://www.facebook.com/groups/399304463592210"><i class="bi bi-facebook"></i></a></li>
          <li class="list-inline-item"><a href="#"><i class="bi bi-instagram"></i></a></li>
          <li class="list-inline-item"><a href="#"><i class="bi bi-twitter-x"></i></a></li>
          <li class="list-inline-item"><a href="#"><i class="bi bi-telegram"></i></a></li>
        </ul>
      </div>
      <div class="align-bottom footer-nav">
         <a data-bs-toggle="modal" data-bs-target="#privatPolicy" href="#">Privacy Policy</a> | <span class="text-nowrap"><small>Last update: <span id="lastUpdate"></span></small></span>
      </div>
    </div>
    <div class="col-sm m-4 footer-nav">
      <h4 class="">Quick Links</h4>
      <ul class="list-unstyled">
        <li class="mb-2"><a href="about.html">About</a> <!--span>— Learn what OPTIMUS can do</span--></li>
        <li class="mb-2"><a href="download.html">Download</a> <!--span>— Try the demo version</span--></li>
        <li class="mb-2"><a href="license.html">License</a> <!--span>— Choose your plan</span--></li>
        <li class="mb-2"><a href="contact.html">Contact</a> <!--span>— Get in touch</span--></li>
      </ul>
    </div>
  </div>
</footer>
  </script>
    // Последняя дата обновления страницы
      const lastMod = new Date(document.lastModified);
      const formatted = lastMod.toLocaleDateString("en-GB", {
        day: "2-digit",
        month: "short",
        year: "numeric"
      });
      document.getElementById("lastUpdate").textContent = formatted;
  </script>
<style>
footer.light-energy {
  background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 80%, #dee2e6 100%);
  color: #212529;
  padding: 2.5rem 1rem;

  border-top: 1px solid #dee2e6;
  box-shadow: 0 -2px 10px rgba(13, 110, 253, 0.05);
}
.footer-nav a {
  margin: 0 0.9rem;
  text-decoration: none;
  color: #495057;
  font-weight: 500;
  transition: color 0.25s ease, text-shadow 0.25s ease;
}

.footer-nav a:hover {
  color: #0d6efd;
  text-shadow: 0 0 6px rgba(13, 110, 253, 0.3);
}
.footer-social {
  margin: 1rem 0;
}
.footer-social a {
  font-size: 2.0rem;
  color: #6c757d;
  transition: color 0.3s ease, transform 0.3s ease;
}

.footer-social a:hover {
  color: #0d6efd;
  transform: scale(1.1);
}
</style>


</div> <!--container-->



  <div class="modal fade" id="privatPolicy" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable modal-fullscreen-md-down">
      <div class="modal-content">
        <div class="modal-header bg-info">
          <h5 class="modal-title" id="myModalLabel">Privacy Policy</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">          
          <p></p>
        </div>
      </div>
    </div>
  </div>
  <script>  
    // Получите ссылку на модальное окно
    var myModal = document.getElementById('privatPolicy');
    // Создайте обработчик события `show.bs.modal`
    myModal.addEventListener('show.bs.modal', function (event) {
      // Получите элемент, в который нужно вставить текст
      var modalBody = this.querySelector('.modal-body');
      // Задайте текст, который вы хотите загрузить
      //var textToLoad = 'Этот текст был загружен в модальное окно с помощью JavaScript!';
      // Вставьте текст в тело модального окна
      //modalBody.innerHTML = textToLoad;
      loadFile('https://zeroturtle.github.io/privacy_policy', modalBody);
    });
  </script>

</body>
</html>
