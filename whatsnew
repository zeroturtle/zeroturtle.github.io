
Version information
===============================================
Version: Future Release v5.3 "Pegasus", XXth November. 2025

Summary
----------------
There’s a lot to celebrate.
Зто следующий релиз системы полный замечательных новых возможностей. Наиболее значительная - публикация результатов из системы на web-сайте системы. 
Сайт из 4х разделов: список соревнований с результатами (выгрузка данных из системы, фильтр списка по году/дисциплине/названию); раздел с описанием системы, какие преимущества получаете пользуясь системой и FAQ; раздел загрузки системы или ее компонентов, включая документацию; раздел оформления подписки; авторизованный доступ.

Bug Fixes
----------------
- новый формат файла лицензии, хранится в UTF-8. GetMem работает только для shortstring, для unicode требуется выделять через New().

New Features
----------------
- фото команды хранится в БД, ВАЖНО! для фото использовать только JPEG-формат!

Quality Improvements
----------------
- список изменений выводится на странице download из файла whatsnew (по запросу).


===============================================


===============================================
Version: Release v5.2 ARTEMIS Update 2, 27th July. 2025

Summary
----------------
Этим релизом мы продолжаем улучшать качество продукта и его удобство использования. 
Первый релиз с поддержкой unicode. Теперь OPTIMUS выглядит на всех системах одинаково красиво.
Обновление средств разработки: компилировано в Delphi 10.4; новые компоненты DevExpress 23.2.6, Indy 10.6.2, FastReport 2023.2

Bug Fixes
----------------
- исправлена ошибка сжатия потока в библиотеке ZLib для буфера на PAnsiChar
- создание папок мероприятия рекурсивное по запросу.
- единая форма SplashScr для всех модулей; картинка заставки загружается из ресурсов проекта;
- в процедуре SaveScores заменен dataset на query для записи оценок в базу, т.к. у TpFIBDataSet не работает AppendRecord! 

New Features
----------------
- выгрузка данных на сайт
	создать event: передать json + page_logo на сайт через post запрос;
	экспорт/отправка данных на сайт: логотипы, жеребьевка, team;
- дизайн сайта OPTIMUS Scoreboard: при создании event переключать цветовую схему dark/light, указать картинку для шапки страницы event (по умолчанию используется Title.jpg)
- новый алгоритм дублирования вывода видео на экраны 
- в Ferret через меню можно менять: 1) пользователя консоли; 2) загружать цветовую тему (стиль) окна из файла; 3) переназначить кнопки консоли; 4) показать/скрыть журнал работы модуля
- замена алгоритма экспорта/импорта оценок (detail и errors) в файл, использован query.batch_processing вместо вызова сторед.процедуры, чтобы сохранять локально при удаленном подключении.
- для всех форм используется шрифт "Segoe UI" (по умолчанию для интерфейса Windows10)
- Отдельное окно Competition, открывать через меню. Отдельная форма зачеты-туры.
- перевод язык экранных форм рус/eng для всех модулей, не забудь подключить нужный resourcestring
- рассчета стоимости подписки через js на странице license

Quality Improvements
----------------
- Новые заставки для SplashScr в едином формате 600х380 для всех модулей
- видео перед запуском копируется на локальный компьютер во временный файл. В Ferret копируется всегда, в OPTIMUS согласно параметра LocalCacheVideo (по умолчанию = false).
- для divepool использовать только квадратные 320px BMP-картинки, для логотипов соревнования можно использовать любой формат
- фото команд хранятся в БД: -Портативность данные и изображения хранится в одном месте, что упрощает перенос базы данных на другой сервер; -упрощает процесс создания резервных копий; Недостаток: Размер базы данных увеличивается.
- проверка версии из сайта обрабатывается скриптом version.php, возвращает json { "version":"string", "MD5":"string" } для запрошенной в GET параметре "app" названия модуля: 'OPTIMUS','FERRET','VANGUARD','ZODIAK' {,'DZTV'}
- переключать язык справочников через ком.строку ключ -language или -g [ru/en/fr/es/de/ua]. Вызывается процеруда Chence_LANG. Если указан язык не из списка по умолчанию переключится на en.
- заменить ico для toolbar формы Abstract
- таблица PoolColor объеденена с Pool, для Zodiak используется поле Colored в таблице PoolType
- на форме результатов удалять ViewError вместе с ViewDetail, через AD-триггер при удалении Point удаляется причина нарушения

===============================================

===============================================
Version: Release v5.1 ARTEMIS Update 1

New Features
----------------
- Экспорт оценок (таблицы ViewDetail и ViewError) во внешние файлы. Для обработки результатов offline-тестирования.

Bug Fixes
----------------
- исправлена error217 для exception на win10, выводится описание для finalization секции unit'а
- добавлена сортировка списка оценки, исправлена показ панели жеребьевки в редакторе, исправлены перевод нарушений на UA
- Показывать pnlDraw в редакторе


===============================================

===============================================
Version: Release v5.0 ARTEMIS
-N замена AbsoluteDB на FirebirdSQL.
-N переписаны все запросы обработки данных: Calc, Details, Scores, Proto и StartList. 
-N использована уникальная способность FIBPLUS сжимать blob на клиенте, для экономии трафика и размера БД
-N перевод resourcestrings (языковые файлы) на English
-N языки в таблице Languages, только одна строка отмечается Active=true на котором выводится перевод
-N multilanguage database design (ру/en/ук/fr/es/de) для таблиц Roles, PoolType, Errors, Penalty, (Type, Task - только чтение)
	При добавлении триггер BI получает new.TEXTCONTENT_ID из генератора, в триггере AI добавляются переводы для всех имеющихся языков, AU меняет перевод только текущего языка. 
-I печатные формы на рус/eng/укр
-N проверка новой версии OPTIMUS и модулей Zodiak, Ferret, Vanguard выполняется только для активной лицензии:
	при подготовке релиза создается файл version.ini, где содержится имя_модуля=номер_версии.
	При запуске версия программы запрашивается файла version.info из сайта и сверяется с версией модуля. Если версия новее на сайте выдается сообщение "Доступна новая версия <Имя программы>."
		(I) если версии совпадает, тогда сверяется контрольная сумма (md5-hash) файла лицензии, если не совпадают деактивация лицензии!
		при ошибке чтения version.info используются данные локальной лицензии.
-N обмен данным через internеt по https в комплекте поставляется две DLL OpenSSL;
-I новый формат Licence.Version=4 (crypted).
-N Удален справочник «Участники». Теперь судьи и члены команд указываются непосредственно в соответствующих справочниках, добавлен справочник "Штрафы"
-I убрал судейские запросы с консолей (не используется)
-N интерфейс Vanguard 3.0 унифицирован с формой в OPTIMUS. Вынужден использовать RX компоненты из за некорректного поведения стандартных. Размер exe-файла уменьшился вдвое!!!
-I добавлены DFV картинки для divepool VFS2, FS16, FS10, "артистик freestyle", VFS4-Axis
-I добавление туров при создании event'а согласно программе зачета (с учетом заданий)
-N проект Web:
	создать папку, настроить index.html из шаблона, скопировать все файлы из шаблона в папку event'а (css, js, jpg);
	доступ к загрузке только после авторизации (регистрация, вход, обновить пароль)
	добавить в БД запись event'а
	лог загрузок 
	customer portal (download page, subscription page, revew page, technical support)
-I Картинки Divepool (нужны для отображения imgHint подсказки в протоколе) выгружается при отмеченной галке в папку PUBDIRECTORY\"Divepool\<PoolType_ShortName>" соревнований в BMP или PNG формате.
=== Архив программы загружается на сайт вместе с файлом версий version.info (содержит для каждого модуля версию и md5). Название архива соответствует версии релиза.
	В таблице Type поле MaxValue новое название MAXSCORE, в таблице Errors и Pool поле Value переименовано в AValue
-I генератор лицензий unicode ready + online версия
-N после перекодировки видео Zodiak создается ini-файл список видео для выгрузки в формате Result_ID = Video_File
-N для команды в поле InfoURL можно указывать URL на внешний ресурс. Если не указано ставится ссылка "<Team_ID>_team". Заполняется из запроса протокола.
	

===============================================

===============================================
Что нового в OPTIMUS Prometheus Update 7
-N время задержки таймера TimerDelay (сек) применяется автоматически согласно настроек из Event_Type (для CISM=5 и CF=60)
-I Поправил options в Zodiak, заставка с фото команды формируется из печатной формы TeamApp_scr.fr3
-N в HTML печатных формах жеребьевка фигур протокола выводятся через "-" вместо ","
-N новая печатная форма "Заявка команды" для HTML: фото команды, список членов
-F печатные формы наследуются из нового шаблона
-N на TLicense_Expired добавить линк для перехода на сайт
-I скорректирована "методичка" с учетом внесенных изменений
-N редактор Divepool позволяет добавлять новые Type и менять картинки
-N в Vanguard перед запуском указывается соревнование
-F на форме загрузки видео Vanguard выбирается Events, списки team и rounds строятся по указанному event
-N в Vanguard вставка RoundResult через INSERT из данных временной таблицы
-F в Zodiak в списке отображаются только оценненные видео выбранного зачета
-I заполнены названия картинок divepool USPA
-F в печатных формах строка copyright выводится всегда для неактивной лицензии
-F вывод html без стилей, добавил уникальные имена стилей в proto.css, для detail не делал т.к. они выводятся в отдельном iframe
-I для экспорта протокола на сайт нужно поставить галку для eventa


===============================================

===============================================
Что нового в OPTIMUS Prometheus Update 6

Summary
----------------
Я в восторге от работы с над релизом Prometheus и от полученных результатов.
Это фундаментальный релиз с большим количеством расширений и качественных улучшений, update 6 предоставляет расширенные возможности, с которыми Вы достигнете больших результатов, чего не могли до него.
В обновлении уделено внимание инструментам цепочки публикации информации. Этот релиз использовался на ЧУ-2024 FS.
Вы мотивируете нас своими лайками и коментариями. Мы рады услышать ваши отзывы.

Bug fixes and improvements
----------------
- Для мероприятия можно указать два логотипа. Они подгружаются в шапку шаблона документов из БД: Logo1 в левом углу, а Logo2 в правом. Использовать только JPG
- расширение картинок divepoolUSPA из SIM для MFS2, FS4, FS8, FS16, VFS4 и для collegiate 2way, 6way, VFS2; добавлен дайвпул WSA
- в таблицах DivePool для Blob field (с bipmap картинками) добавлен алгоритм сжатия caZLIB (Fastest compression) с compression level = 9 (1..9, 1 - fastest compression, 9 - max compression) 
- настройка языка укр/рус/eng для колонки Name в таблицах Errors, PoolType, Roles, Task
- режим отложенного запуска таймера указывается через выпадающий список. Принимает значения 5сек для FS-CISM (FS) или 60сек - для CF. По умолчанию "без задержки"
- время начала задержки запуска для консолей сохраняется в таблице ViewDetail под Sequence = -1, консолидированное время в RoundResult
- в Zodiak цвет заливки индикатора таймера на крайних 5сек меняется на clWebOrangeRed, добавлена рамка вокруг бегунка;
	объединены блоки Country и Team. Флаг и страна всегда слева;
	инверсия цветов бегунка таймера в период задержки запуска таймера для CISM и CF
	Добавил border всех блоков цветом clSilver;
	по умолчанию выбран utrafast режим обработки;
	исправлены мелкие ошибки интерфейса и настроек блоков под разные разрешения.
- для каждого Event'а соревнования можно указать разные картинки Divepool
- удалил из OPTIMUS поддержку Public Display. Вместо него для показа на DZTV будет использоваться цепочка плеера PubDisp.
- названия фигур divepool для AE соответствуют FC'24
- при установке галки "official" (подпись EJ) обновляется значение JudgeTime = Now
- для WS нарисовал печатную форму html протокола 
- обновился макет сайта результатов и шаблон Web-страницы, исправлен results.js
- Расширенная инструкция по применению и методическими рекомендациями. 


===============================================

===============================================
Что нового в OPTIMUS Prometheus Update 5
Содержит исправления ошибок и улучшение скорости и надежности работы системы в сетевом окружении.
- Ferret запрос на подтверждение перезаписи существующего файла при копировании из сервера на локальный диск
- В Ferret можно сменить номер судейскй консоли не закрывая программу
- в запросе судейские обязанности исправлена ошибка подсчета количества просмотров
- Ferret вернул русские надписи на кнопках
- Ferret кнопку "Фрагмент" поставить справа от выбора диапазона
- Vanguard исправлена ошибка активации кнопок после отмены загрузки
- Vanguard добавлена блокировка для пошагового выбора параметров при загрузке видео
- Ferret добавлена вернуть настройки кнопок по умолчанию default
- в Vanguard клик по image доступен при активных кнопках
- расчет StartTime проводится с учетом {MAXPORTS} для FS, AE, CF
- в log'е с именем модуля выводится имя компьютера с которого запускается программа
- в result.js исправлена ошибка incase sensitive для фото команд
- из формы записки html убрал ссылку на видео (все равно видео не загружаю без хостинга)
- исправлен алгоритм записи промежуточных оценок и запрос записи оценок в БД на закончить оценивание, уменьшит вероятность возникновения блокировки таблицы при работе по сети
- название печатной формы судейской записки detail_html указывается через const для Zodiak и для печати вручную 
- в OPTIMUS не отображается панель "Дождитесь..." после сохранения оценок консоли!
- в OPTIMUS исправлена ошибка не сбрасываются оценки предыдущего просмотра!
- исправлена процедура сохранения оценок, теперь JudgeID записывается прямо в таблицу, раньше обновлялось из запроса Points 
- параметры консолей (название, монитор, JudgeID) устанавливаются каждый раз на первом просмотре, на случай если замена на мониторе
- скорректировал Videographer briefing в методичке


===============================================


===============================================
Что нового в OPTIMUS Prometheus Update 4
- исправлена ошибка утеря времени старта при смене наборов оценок просмотров
- исключен избыточный тип дисциплины Freefly-сертификации
- переписаны запросы Points для outdoor дисциплин, ошибки/штрафы отображаются в скобках рядом с оценкой. Запросы Errors удалены за ненадобностью
- Промежуточные оценки судей отображаются вместе с ошибками в одной таблице.
- добавилась закладка Errors на форме Results, возможность просмотра, ввода и редактирования ошибок/штрафов
- из OPTIMUS убрал форму Public Display, совмещен экраны TV и PD, при включенной галке дублирования видео на ТВ после "Сохранить" выводится записка тура 
- в запросах AE  оценки всех судей (стажеров нет) на мониторах учитываются при расчете результата
- исправлены мелкие ошибки в коде
- в запросы Calc и Point добавлен MAXPORTS - количество консолей. Для простроченной лицензии или без нее, MAXPORTS всегда =1, для действительной лицензии будет применяться из настроек Options.
- обновлены картинки divepool из USPA SIM для SpeedFS-10 
- исправлена ошибка работы с CISM таймером, и добавлен в Ferret
- переопределять константы через реестр
- модуль "плеер" для DZTV
- исправлена ошибка определения координат консолей на мультиэкранной системе OPTIMUS
флажки 6шт = 192грн


===============================================


===============================================
Что нового в OPTIMUS Prometheus Update 3
- нарисовать html-печатную форму заявки команды с photo и Team_members
- исправлены тайминги в ZODIAK и добавлен freeze frame по окончании рабочего времени
- исправлена ошибка отображения панели жеребьевки в Ferret
- в справочнике судей контролируется назначение номеров консолей
- исключены лишние библиотеки кода в Ferret 
- добавлено окно настройки параметров запуска программы, проверка наличия файлов
- параметры запуска в модулях расширения считываются из реестра
- на Web картинки флагов стран подменяют буквенные сокращения на SVG-картинки.
- в Zodiak показывать переход (2я картинка блока)
- в Zodiak выгрузка html-записки после обработки видео или кнопкой Export_HTML
- в Ferret в меню и редакторе добавлена работа с мышкой:
	дбл-клик по списку запускает просмотр
	клик по оценке в редакторе устанавливает курсор на оценку
	клик по строке ошибок переключает в меню ошибок
- при рассчете итогового результата исключены оценки стажеров


===============================================

===============================================
Что нового в OPTIMUS Prometheus Update 2
- исправлена ошибки в запросах ErrDescr (лишняя группировка), судейские записки (пропущен MEMORY)
- оптимизирован запрос calc free round для AE 
- добавлены Result_ID в запросы протокола, для формирования ссылки на Detail оценок
- исправлена ошибка закрытого tblColumns при переключении мероприятия
- исправлена ошибка не отображалась крайняя оценка в редакторе
- автоматическая обработка в Zodiak оценненных видео с Sign=True; PubVideoFile=Null
- добавлено округление оценкок прямо в БД, а не из кода
- доработаны печатные-формы html: добавлены hyperlink для оценок, каждый зачет отдельной таблицей
- в редакторе оценок: autosize колонок по содержимому, оптимизация обновления грида


===============================================

===============================================
Что нового в OPTIMUS Prometheus Update 1 
- контроль лицензии в отдельном потоке
- в окне About отображается информация действующей лицензии: список дисциплин, владелец, срок действия
- в Ferret количество просмотров сохраняется в ViewDetal, в mConfirm выводится количество выставленных оценок
- подтверждение запуска PDS генерируется из кода, вместо создания отдельной формы
- окно VANGUARD в OPTIMUS сделан в две Pages, на первой странице форма Settings, если выбрано перекодировать видео открывается Vanguard на второй странице. Прогресс кодирования отображается в StayOnTop progressbar
- унифицированы внутренние структуры Optimus и Ferret, исправлены мелкие ошибки
- при выборе фрагмента все точки останова отсортированы по времени
- при конвертировании видео временный файл создается в папке windows/temp 
- исправлены ошибки при работе по сети


===============================================

===============================================
Что нового в OPTIMUS Prometheus 
- добавлена таблица предопределенных Events по правилам дисциплин
- для Free round запроса Записка AE и ISF добавлено вычисляемое поле Technical = InitialTech - Execution
- в печатной форме шаблона документов в PageHeader используются данные Event!
- рабочее время тура хранится в таблице "Зачеты". При создании зачета рабочее время соответствует выбранному типу Event.
- скорость замедленного просмотра для тура подтягивается из зачета или задается вручную
- параметры запуска командной строки OPTIMUS и параметры настройки мониторов сохраняются в реестре HKEY_CURRENT_USER\Software\Optimus. Используются при следующем запуске любой программы FERRET, Vanguard, Zodiak.
- в меню ошибок добавлены английске термины
- обновлен Vanguard 2.0, встроен алгоритм обрезки видео по временным меткам
- на экране Vanguard выводится отмеченный кадр момента идентификации, отделения и разбежки. Мигание активной кнопки, информационные сообщения
- окно Vanguard встроено в EJ форму OPTIMUS 
- протокол для WSCP строится в зависимости от выбранного Event (EventType_ID).
- сброс настроек реестра через ключ -r (-remove) командной строки
- CISM-style запуск таймера: 1)при отделении включается ожидание таймера 2) запуск через 5сек или по нажатию судей
- в Ferret отключен Calc - не считать итоговую оценку, т.к. это глупость
- единый журнал работы для всех приложений системы
- обновился Technical guide - описание технической реализации, включает инструкции по установке и подключению оборудования, начальная конфигурация;
	в User manual - руководство пользователя описаны процедура работы и методические рекомендации.


===============================================

===============================================
Что нового  в OPTIMUS Alchemy Update 5
- внесены поправки согласно изменений в правилах FAI 2023, исправлены мелкие ошибки. 
- в протокол FS добавить сортировку по макс оценке тура the highest score in any completed round и Fastest in the last completed round
- в протокол AE добавлена сортировка для tie-break
- при запуске FERRET судья консоли выбирается из списка судей соревнования + можно настраивать кнопки управления судейской консоли
- % замедления просмотра для каждого тура хранится в поле PlayBackSpeed таблицы Round, по умолчанию значение берется из tblCompetition
- при переключении в mEdit вывести окно "Judges Confirming..." со названиями судейских консолей, фона консоли соответствует режиму: mEdit-желтый, mConfirm-зеленый;
- для тура указывается Task_ID по нему определяется тип расчета результата
- в список задания фрагмента временные метки (через 10сек) рабочего времени, и время событий (выставления оценко, начало и конец видео, старт и стоп рабочего времени)
- таймер можно остановить вручную (при MANUALTIMER=true) кнопкой "+". Пауза видео в режиме просмотра делается экранной кнопкой "Пауза", кнопкой "Пробел" или кнопкой "." с консоли цифровой клавиатуры.
- OPTIMUS и Ferret поддерживает ISF: (score[0] содержит летное время; ручная остановка таймера; задавать рабочее время Free Round;)
- список меню ошибок сортируется по полю Code (код ошибки отображается в судейской консоли)


===============================================

===============================================
Что нового  в OPTIMUS Alchemy Update 4
- после Confirm (сохранить) EJ показывать записку на Public Display из шаблона FR
- в Options добавлены настройки MULTISCREEN 
- Public Display System (PDS) интегрирван в OPTIMUS
- Во время оценивания в правый верхний угол экрана PublicDisplay выводится LIVE
- после оценки если список qryList пустой выводится приглашение запуска PublicDisplay с таймером
- копирование файлов между компьютерами выполняется через Block Read/Write;
- показывать прогресс копирования файла в F, V и Z
- на Public Display выводить текущий протокол после просмотра видео группы соревнований
- на экран PD вывести "LIVE", на повторном просмотре выводить - "REPLAY (скорость%)"



===============================================

===============================================
Что нового в OPTIMUS Alchemy Update 3
- исправлена ошибка IP-binding для TFTP-сервера
- Ferret исправлена ошибка вывода PoolCode текущей draw-фигуры до ModeScoring
- все фразы из кода перенесены в resources
- добавить комбобокс с настройкой ffmpeg параметра -preset <..> отвечает за качество видео
- добавлен инфоблок фото команды. Накладывается с начала видео и гаснет за 1 сек до начала рабочего времени (до отделения). Фото (.jpg) растягивается по размерам инфоблока.
- печатная форма протокола интерактивная, т.е. по клику выводится соответствующий протокол указанного Event'а (печатная и html версии)
- обновилась печатная форма протокола WS. Протокол по турам удален.
- Места (Rank) в протоколе считается прямо в печатной форме по выбранному зачету
- в печатных формах протоколов шрифт первых трех строк bold и флаг страны команды
- судейская записка для FSAE, WSCP строится по ViewtDetail и выводится через crosstable FastReport + autosize колонок по ширине листа;
	Печатная форма подходит для всех типов туров. Для построения "по старому" по таблице ResultDetail, надо запрос Query_ID=14 скопировать в Query_ID=2
- добавлен файл настроек options для формата fullHD (1920х1080)
- вернуть конкретный пульт в mEdit (через выпадающее меню для кнопки)  "The System must allow for an EJ to be able to cancel the confirmation of individual judge scores."
- у команды может быть несколько зачетов, к зачету привязываются только туры по которым происходит оценивание.
- картинки FS-4 в цвете помещены в таблицу PoolColor 
- оценки судей вводятся непосредственно в таблицу ViewDetail, каждому Sequence соответствует колонке из таблицы Task.
- обновлены запросы для судейской записки и стартового листа 
- Печатная формма "стартовый лист" выводится в обратном порядке занимаемых мест из протокола
- Подтверждение операции перед началом загрузки видео в Vanguard


===============================================

===============================================
Что нового в OPTIMUS Alchemy Update 2
- обновился движок генератора отчетов FastReport до 6.9.3
- добавилась экранная форма для создания нового соревнования прямо из окна выбора соревнований при запуске Optimus.
- на консоли Ferret в процессе оценки выводится последовательность жеребьевки и подсвечивается оцениваемая фигура.
- информационные сообщения в Vanguard обрабатываются отдельным thread и высвечивается 3 сек 
- экран Vanguard в окне выбора видео для просмотра, отображаются только оценненные видео (Sign=true) и обработанные Zodiak.
	иконка выглядит как флаг страны команды и подписана как номер команды + номер тура. Чтоб посмотреть надо кликнуть на иконку.
- интерфейс формы загрузки видео Vanguard выглядит также как и окно просмотра видео.
- исправлен вид протокола для вывода в HTML: 
	- в шапке указывается название соревнования, Pool_Name Event_Name;
	- жеребьевка рядом с № туров, как на skyleague;
	- внизу выводится дата формирования протокола;
	- *если вставить на страницу JS, тогда клик по оценке показывает записку (правда ее надо сохранять отдельно).
	- *если есть видео рядом с оценкой отображается иконка "плей", клик по иконке запустит просмотр видео
- видео для просмотра в модуле Ferret или Vanguard копируются на компьютер, где запущен модуль. Обработанное Zodiak видео копируется обратно на сервер.
- протокол соревнований показывается по нажатию кнопки с задержкой 7сек. Страницы многостраничного протокола показывается по очереди. 
- в таблице Team добавлено поле Photo "фото команды", где хранится имя файла.


===============================================

===============================================
Что нового в OPTIMUS Alchemy Update 1
- исправлен подсчет оценок для SF-дисциплины по правилам  USPA
- добавился картинки Divepool для FF сертификации кат С "head up" и кат D "head down"


===============================================

===============================================
Что нового в 3.14 Alchemy
- выдается предупреждение если указан неправильный путь для DirWatch
- изменен расчет старта рабочего времени для 5 пультов как среднее арифметическое без макс и мин времени, для 3 вычисляется как среднее всех
- в ViewDetail добавлена колонка Judge_ID
- Исключил маску оценок из базы, MAXPOINTS берется из Columns таблицы Task, количество оценок расширено до 51
- Zodiak обрабатывает только FS, поскольку убрали маску оценок :(
- сохраняется время запуска таймера каждого пульта (важно для реализации асинхронного запуска) и количество просмотров на консоли Ferret
- окна выбора фигур жеребьевки при настройке тура вызывается через кнопку <...>  в ячейке "Фигуры".
- исправление в режиме редактора оценки отображаются сразу после открытия
- названия колонок редактора консоли соответствуют заданию тура
- для FERRET изменен интерфейс судейской консоли: вывод информацим текущей оценки (point,time,errors_list,error_value_sum) - проверим что удобнее
- прокрутка видео с консоли управления - <<5, 15сек>>.
- Сформирована база знаний (FAQ) с методическими рекомендациями для множества сценариев применения.
- создать новое соревнование можно прямо из окна выбора при запуске программы


===============================================

===============================================
Что нового в версии 3.12.5 “Swiss Army Knife” 
- запросы подсчета FFC и FFF соответствуют правилам FAI
- проработано действия в меню для всех режимов
- максимальная оценка и максимальный штраф хранятся в Type
- исправлена процедура чтения настроек соревнования
- для ФФ исправлен расчет для compulsory и free round для ситуации с 3 или 5 судей
- при заведении нового соревнования создаются с зачет по умолчанию и по запросу подтверждения создаются туры


1. добавлена новая дивциплина wingsuit. печатные формы на один тур и упражнение.
4. старший упражнения (оператор программы) может смотреть жеребьевку на своем экране
3. оптимизинована работа с временными таблицами
5. масштабировать pnlDraw по вертикали картинки - 
2. печатные формы протокола в html
1. расчет места в протоколе считать в запросе
4. подписывать в RoundResult тур команды и выводить в протокол только подписанные или печатной форме помечать unofficial result (надо поставить галку подписано!).
7. шаблон нумерации команд по видам упражнений по шаблону Prefix+№пп.
9. изменять Figure при изменении жеребьевки в RoundResult, переделать вывод на экран вместо Pool
2. вывод результата на консоли 
7. добавить командам поле зачет: Open/Pro, Общий/жен, ОтожжемПоВзрослому/ДорогуМолодежи, А/АА/ААА...
7. Протокол переделывать места по сортировке и по каждому зачету
8. функции создания запросов для каждого вида расчетов (calc.pas) перенести в таблицу Queries с привязкой по Type_ID
2. в протоколе надо только правильно сортировку делать, место - это номер строки в шаблоне+ убрать подсчет места из запроса протокола
4. добавить разные протоколы для Type_ID
9. вывод в шапке протокола жеребьевки туров 
10. разделяет пул вопросов для формирования вопросника по нескольким разделам
4. Режим простотра на экранах судей + консоль управления.
5. просмотр фрагментов!!
3. в результатах добавить галку signed (или official) для каждого результата
2. заменить в базе дату проведения мероприятия на два поля дата_с .. дата_по
	и подправить печатный шаблон
10. сохрать настройки options  при заведении мероприятия.
Поправить в базе
1. В таблице UPDATE Type SET MQP=1 WHERE Type_ID=3
2. в таблице PoolType добавить поле Prefix int(2) 
3. в таблице RoundResult добавить 5 полей FigureX string(2) 
4. в таблицу Question добавить поле Section_ID INTEGER
5. Добавить таблицу TopicSection - разделы тем


1. Повтороный просмотр!!!
2. Посчитать LastPointTime- время крайней зачетной формации.
	+и сохранить в RoundResult 
3. добавить таблицу задачи на прыжок
	- для wingsuit: время, скорость, дистанция
	- для пилотирования: дальность, скорость, точность
4. добавить в настройки управление TFTP
5. у соревнования создается Event - "общий зачет".
	Если для разных зачетов одного упражнения разные жеребьевки - добавляют туры каждого зачета Event.
	У команды указывается зачет в котором она выступает.
7. пеоенести из Competition в Event жеребьевку тура
8. блокировать нажатия кнопок при просмотре фрагмента.
9. если назначена консоль с которой запускается таймер, только с нее разрешается перезапуск видео при фальшстарте
10. - задавать WaitTime время ожидания до показа результата после окончания рабочего времени в VideoOutputHook (сейчас = 1).
 - флаг остановки счета при фиксации времени первой фигуры (для SF)
 - во время WaitTime каждую секунду менять цвет счета white/yellow/red
11. записка для WSCP через MemoryTable

1. модуль Zodiak - создание видео судейства (DZTV публике) и размещение результатов в web (создание mp4 и html-файлов)
2. блокировать обработку нажатий при просмотре без оценки
3. исправлена обработка лицензии, теперь ее можно просмотреть через меню и заменить.
4. в memory ViewDetail поле Judge_ID пустое (заполняется при записи в таблицу БД) 
2. блокировать обработку нажатий при просмотре без оценки?
6. генератор лицензий 
5. назначать консоль с которой разрешается управление для старт таймера и ревью
1. В Optimus добавлено лицензирование - это значит, чтоб пользоваться всеми возможностями необходимо зарегистрироваться.
Преимущества регистрации
- подписка на новости
- 5 судейских консолей
- доступ к сервисным модулям
- доступны все дисципилны
- приоритеное обновление версий

Что нового в версии 3.12
- многоуровневое меню ошибок. позволяет детализировать ошибку. Например "ошибка перехода" может трактоваться как "дополнительный захват", "разорваная подгруппа"
- для одной оценки можно указывать несколько ошибок. например при оценке FF или работы оператора
- значение Value ошибки можно вводить в диапазоне (проверка значения из диапазона, а также общей суммы штрафов)
- для обязательного тура FF MaxValue-оценки расчитываются согласно жеребьевки
- панель жеребьевки можно свернуть/развернуть кликнув по заголовку панели
- возможность прокрутка видео в режиме просмотра/оценки с консоли управления на <<5, 15сек>> вперед или назад, чтоб не ждать долго пока готовятся к отделению
- В StatusBar консоли отображается описание выставленных ошибок и Value для текущей выбранной оценки. Также выводится сумма штрафов (если задано несколько) рядом с временем оценки
- все фигуры divepool freefly и freestyle имеют Value.

OPTIMUS 3.9.10
    Результаты по всем дисциплинам оформляются через судейскую записку.
    Доработана обработка индивидуальных оценок для WS и CP
    Добавлены сервисные функции настройки системы
    Обновлена документация на сайте
    Изменена процедура активации консолей
    Оптимизирована структура БД, исправлены мелкие ошибки

OPTIMUS 3.9.7 Vanguard
    Разработан модуль Vanguard - для загрузки видео оператором команды.
    Добавлена настройка информационных блоков для формирования кадра модуля Zodiak (v1.5)
    Оптимизирована структура БД, исправлены мелкие ошибки

OPTIMUS 3.9.4.0
    Обновлены картинки divepool fs8 и vfs
    Устранена досадная ситуация со срывом повторного просмотра видео!.
    Теперь у каждого соревнования есть зачет. Команды привязаны к конкретному зачету, что влияет на итоговый протокол.
    Добавлены печатные формы промежуточных протоколов для WS и CP

OPTIMUS 3.9.1.0
    Исправлена ошибка при оценке "Скоростных формаций"
    Сохраняется время крайней зачетной фигуры для FS

OPTIMUS 3.8.0.0
    Добавлена дисциплина Wingsuit упражнение летных качеств (performance)

OPTIMUS 3.7.5.3
    Унифицированы печатные формы протоколов
    улучшеный модуль трансляции Zodiak
    исправлена ошибка сохранения судейских оценок

OPTIMUS 3.7.4
    Обновили блоки 1 и 13 в соответствии с FAIшными
    Модификация структуры БД для трансляции
    Новый параметр -multiuser разрешает доступ к БД с других компьютеров
    бета ZODIAK создал тестовый ролик трансляции.
    в Cristal добавилась тема теста по FF

OPTIMUS 3.6.10
    Исправлена ошибка сохранения результата без выставления оценок
    Решено отказаться от встраивания Cristal
    вместо этого в Cristal появилась возможность добавления тестирующихся
    модуль ZODIAK теперь показывает результат в виде составной строки ВРЕМЯ-ЗАЧЕТ-НЕЗАЧ

OPTIMUS 2019 года Aurora!
    обновлена версия библиотеки FFMPEG до 4.1
    шаблон нумерации команд по видам упражнений по шаблону Prefix+№пп
    старший упражнения (оператор программы) может смотреть жеребьевку на своем экране в перспективе добавится просмотр жеребьевки на судейских консолях
    картинки жеребьевки масштабируются по вертикали на высоту экрана
    добавлены печатные формы протокола в виде html
    в итоговый протокол попадают только подписанные оценки
    команды можно разбивать по зачетам одного упражнения
    функции запросов перенесены в таблицу БД с привязкой по Type_ID
    пул вопросов разделен на Section_ID для формирования вопросника по нескольким разделам
    оптимизинована работа с временными таблицами
    прочие мелкие улучшения и исправления

OPTIMUS от 9/9/18
    обновлена версия библиотеки FFMPEG до 4.0.2
    обновлен список ошибок для обязательной программы ФФ и divepool элементов
    для оценки обязательной программы в ФФ добавлена возможность менять порядок жеребьевки элементов тура команды
    новые печатные формы для оценки ФФ: Жеребьевка туров и Итоговый протокол
    исправлена ошибка отображения сервисного сообщения в редакторе оценок
    прочие дополнения и исправления.

релиз OPTIMUS Tesla, названного в честь гениального инженера и изобретателя Никола Тесла.
- просмотр видео происходит либо на экране большого ТВ либо при его отсутствии на экранах судейских консолей, опция устанавливается в настройках.
- данные о дате страховки и ВЛК указываются в списке участников команды (раньше хранились в общем справочнике участников)
- период проведения мероприятия указывается двумя полями «дата с», «дата по».
- на судейскую консоль выводится кроме информации о названии команды и туре, также можно вывести жеребьевку тура в картинках,(что делает излишним печать жеребьевки). Также на консоли производится индивидуальная корректировка выставленных оценок и просмотр итоговых результатов оценки.
- надписи и сообщения программы собраны в отдельный resourcestring, что упрощает переход к мультиязычному интерфейсу.
- в протоколе соревнований, места команд считаются с учетом гостевых команд
- Новая консоль старшего судьи упражнения позволяет выполнять управление (запуск просмотра видео с оценкой, либо просмотр выбранного диапазона видео файла, задание скорости просмотра, выбор консоли запуска таймера) и контроль процедуры оценки (нажатия кнопок судейских консолей, вывод текущего режима работы, показания таймера рабочего времени), а также просмотр детальной информации о выставленных оценках.
- диапазон просмотра задается установкой/перетягиванием маркеров на линейке прокрутки видео. Для упрощения позиционирования на шкале показываются временные метки момента начала и конца рабочего времени и метки выставленных оценок
- обновлены версии библиотек FFMPEG 3.4 и AbsoluteDB 7.90
- оптимизирован код для ускорения работы, добавлены множественные дополнения и исправления.



* * * * * * * * * * *
Бесполезные штуки
-? *Сделать размывание (fadeblur) для freeze frame через опции ffmpeg
(?) печать картинок жеребьевки выбранного тура
** Сделать доступ к Ferret по модели SaaS (судейство как сервис) в облаке, это позволяет экономить на проезде и проживании судей.
(?) поменять архитектуру: Консоль только отправляет нажатия кнопок, а сервер отвечает за видео, и принимает нажатия кнопок с клиента и сохраняет их. 
(?) для USPA выделить классы дайвпула rookie, advance, AAA, AA, A
- интерфейс для высоких разрешений экрана монитора (2к...)
- в форме TLicense_Expired вставить BrowserHTML (вместо richedit), если есть подключение - загружать html из сайта или если нет подключения выводить текст из ресурсов
-? вывести в About текущие значения переменных системы;
andrew.okhmat@gmail.com