<?php
  require_once __DIR__ . '/auth/src/libs/helpers.php';
  require_once __DIR__ . '/auth/src/inc/auth.php';

  if ( !session_id() ) @session_start();
  inactivity_time();
?>

<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <title>OPTIMUS Licensing Service</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <script>
       function Single() {
         //найти все checkbox в блоке disciplines
         const div = document.getElementById('disciplines')
         const checkboxes = div.querySelectorAll('input[type="checkbox"]');
         checkboxes.forEach( checkbox => {
           checkbox.checked = true
//           checkbox.disabled = true
         })
         document.getElementById('buyNow').disabled = false
         document.getElementById("total").innerHTML = '&euro;0'
         single.style.display = 'block'
         site.style.display = 'none'
       }

       function Site() {
         //найти все checkbox в блоке disciplines
         const div = document.getElementById('disciplines')
         const checkboxes = div.querySelectorAll('input[type="checkbox"]');
         checkboxes.forEach( checkbox => {
           checkbox.checked = false
           checkbox.disabled = false
         })
         document.getElementById('buyNow').disabled = true
         single.style.display = 'none'
         site.style.display = 'block'
       }

       function submitData(e) {
         e.preventDefault();
         const form = document.forms["myForm"]
         //запрос через GET, непонятно как взять параметры в subscribe?
         //let params = new URLSearchParams(new FormData(form)).toString();
         //fetch(`http://localhost/price.php?${params}`)
         const formData = new FormData(form)
         fetch('http://localhost/price.php', {
             method: "POST",
             body: formData,
         })
         .then(response => response.text())
         .then(data => {
             document.getElementById("total").innerHTML = `&euro;${Math.trunc(data)}<sub>${String(data % 1).substr(1,3)}</sub>`
         })
         .catch((error) => {
            // Handle error
           console.log("error ", error);
         });

         // отключить кнопку если нег галок
         const div = document.getElementById('disciplines')
         const checkboxes = div.querySelectorAll('input[type="checkbox"]')
         document.getElementById('buyNow').disabled = !(Array.from(checkboxes).some((cb) => cb.checked == true))
       }

        window.addEventListener("load", (event) => {
          const div = document.getElementById('disciplines')
          const checkboxes = div.querySelectorAll('input[type="checkbox"]');
          checkboxes.forEach( checkbox => {
            checkbox.addEventListener("change", submitData)
          })
        })
    </script>
  </head>
  <body lang="en">

<div class="container">
   <!-- page header -->
  <header class="" style="background-image: url(images/Title.jpg); background-size: 100% auto;">
  <!--div style="background: linear-gradient(#b35900 55%, white);"-->
      <div class="row align-items-center">
         <div class="col">
		<a href="about.html"><img src="images/turtleZ_color.png" alt="LOGO" class="float-start m-3" height="100px"></a>
              <div class="m-3"><span class="fs-1 fw-bold">OPTIMUS</span> by  <span class="text-light fw-bold">Zeroturtle</span><br>
              </div>
         </div>
         <div class="col m-3 text-end">
		<?php if(!is_user_logged_in()) { ?>
			<a href="auth/login.php" class="btn btn-outline-dark pull-right text-nowrap" role="button">Sign In</a>
		<?php } else { ?>
	                <a href="auth/logout.php" class="btn btn-outline-dark pull-right text-nowrap" >Logout, <?php echo htmlspecialchars($_SESSION['username'], ENT_QUOTES)?></a>
		<?php } ?>
         </div>
       </div>
  </header>


<section id="price">
  <p class="display-4">Pricing options</p>
  <form id="myForm" action="subscribe.html" method="post">
    <div class="row">
      <div class="col-sm-6 d-grid gap-3">
        <input type="hidden" name="years" value=1>
        <!--div>
          <h5 class="text-uppercase">Extend support & upgrade period</h5>
            <div>
              <input type="radio" class="" name="years" id="year1" value="1">
              <label class="" for="year1">1 year</label>
              <input type="radio" class="" name="years" id="year2" value="2">
              <label class="" for="year2">2 years</label>
              <input type="radio" class="" name="years" id="year3" value="3">
              <label class="" for="year3">3 years</label>
            </div>
          <p>One year support and upgrades is included by default. You can extend this period for up to three years with a significant discount.</p>
        </div-->
  
        <div>  
          <h5 class="text-uppercase">Choose the product subscription that best suit your needs</h5> 
            <div>
              <input type="radio" class="btn-check" name="licence" id="option2" value="1">
              <label class="btn btn-outline-primary " for="option2"onclick="Site();">Site</label>
              <input type="radio" class="btn-check" name="licence" id="option1" value="0" checked>
              <label class="btn btn-outline-primary" for="option1" onclick="Single();">Single</label>
            </div>
          <div id="single"><b>Single License</b> recommended for individual users (one judge console). All disciplines available <span class="text-danger">for free</span> you can choose any of them.<br> It suited to evaluate software. </div>
          <div id="site" style="display:none"><b>Site License</b> is for an unlimited number of computers within a single company. It includes: up to 5 judge consoles, web publishing features. Regular Price <span class="text-danger">&euro;200 per each</span> discipline.</div>
        </div>
  
        <div>  
          <h5 class="text-uppercase">Disciplines</h5>
          <div id="disciplines" class="border p-2 d-grid gap-2">
            <!-- outdoor -->
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox1" name="types[]" value="FS" checked>
              <label class="form-check-label" for="inlineCheckbox1">Formation Skydiving</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox2" name="types[]" value="SF" checked>
              <label class="form-check-label" for="inlineCheckbox2">Speed Formation Skydiving</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox3" name="types[]" value="AE" checked>
              <label class="form-check-label" for="inlineCheckbox3">Artistic Events</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox4" name="types[]" value="CF" checked>
              <label class="form-check-label" for="inlineCheckbox4">Canopy Formation</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox5" name="types[]" value="WS" checked>
              <label class="form-check-label" for="inlineCheckbox5">Wingsuit Flying Perfomance</label>
            </div>
            <!-- 
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox6" name="types[]" value="WA" disabled>
              <label class="form-check-label" for="inlineCheckbox6">Wingsuit Flying Acrobatic</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox7" name="types[]" value="CP" disabled>
              <label class="form-check-label" for="inlineCheckbox7">Canopy Piloting</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox8" name="types[]" value="SP" disabled>
              <label class="form-check-label" for="inlineCheckbox8">Speed Skydiving</label>
            </div>
indoor
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox9" name="types[]" value="IF" disabled>
              <label class="form-check-label" for="inlineCheckbox9">Indoor Formation Skydiving</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox10" name="types[]" value="IS" disabled>
              <label class="form-check-label" for="inlineCheckbox10">Indoor Solo Freestyle</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox11" name="types[]" value="DS" disabled>
              <label class="form-check-label" for="inlineCheckbox11">Dynamic Solo Speed</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox12" name="types[]" value="DY" disabled>
              <label class="form-check-label" for="inlineCheckbox12">Dynamic Flying</label>
            </div>
            -->    
          </div>
          <!--p>Select disciplines you need</p-->
        </div>
    
        <!--div>
          <h5 class="text-uppercase">Cloud video storage</h5>
          <p><input class="form-check-input" type="checkbox" id="" name="cloud">
             Premium видео выгружаются на cloud (вся стоимость аренды cloud + 15% за обслуживание).</p>
        </div-->
      </div>
      <div class="col-sm-6 bg-secondary-subtle">
        <div class="text-center p-2">
          <div><span id="total" class="fs-2">&euro;0</span></div>
          <div><small>Price does not include taxes </small></div><br>
          <button id="buyNow" type="submit" class="btn btn-lg btn-success">&nbsp; Order &nbsp;</button>
          <!--a href="subscribe.html" class="btn btn-success btn-lg" tabindex="-1" role="button" aria-disabled="true">License details</a-->
        </div>
        <p>Registered product includes:
           <ul>
             <li>All features avalable</li>
             <li>No advertising or nag-window</li>
             <li>Evaluate products with Free Single License</li>
           </ul>
        </p>
        <p class="text-center p-2">
          <br>
          <strong>Looking to upgrade?</strong> Contact <a href="contact.html" class="link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-75-hover">Our team</a> to move to a more flexible license type.
        </p>
      </div>
    </div>
  </form>
</section>



<section id="download" class="my-5 bg-warning">
  <p class="text-center p-2">
    We recommend testing our software before purchasing to make sure it meets your requirements.<br>
    If you don't have OPTIMUS yet, visit a <a href="download.html" class="link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-75-hover">download page</a>.
  </p>
  <p>&nbsp;</p>
</section>


<section id="subscription" class="border my-5">
  <p class="display-4">Purchasing benefits</p>
	<p>Initial purchase includes annual subscription. One year period means 365 days from subscription's date. <br>
           Technical support provides for customers with active subscription. No reinstallation or reconfigurations required if you purchase.</p>
	<p>The subscription-based model provides the following advantages:</p>
	<ul>
		<li>free upgrades including new releases, updates and hotfixes even if it is a major version upgrade;</li> 
		<li>Online check version, also you will get an E-Mail when a new OPTIMUS version is available;</li>
		<li>fast free technical support via e-mail;</li>
		<li>30 days before a subscription expires, OPTIMUS will send an email notification to alert you to the fact that a new subscription will need to be purchased. 
		An email notification will then again be sent 14 days before a subscription expires. </li>
		<!--li>Significant discounts on multi-year subscriptions.</li-->
		<li>New features by request (for Site-licensed users only). It will be included in following release and accesible for all Optimus users.</li>
	</ul>
        <p><i class="bi bi-exclamation-triangle"></i> After the subscription has expired, you will be required to purchase a new 1-year subscription in order to continue having access to any new minor releases and online product support.</p>
        <p><i class="bi bi-exclamation-octagon"></i> When you use corupted license file a <strong>Free license</strong> will apply (nag window will appears, you won't get new versions or updates, any modules won't work).
	In these cases please contact with our tech support service.</p>
</section>


<section class="border-bottom pb-5 bg-primary-subtle">
  <p class="display-4">Priority Support <small>(*for discussion)</small></p>
  <p>We operate with the low touch model that means we focus on improving the technology to make the customer experience better.</p>
  <p>If you have a problem with OPTMIUS send your request, including a detailed description of the problem you are seeing, making sure you include your license number in the subject line of your message. 
     If you do not include your license number in the subject line, you may not get any kind of reply because of filtering processes we have had to implement in order to control access to the resource.</p>
    <div class="row m-3">
      <div class="col-sm d-flex align-items-stretch">
         <p><i class="bi bi-chat-left-text h1"></i>  <strong>Unlimited number of standard support requests </strong></p>
      </div>
      <div class="col-sm d-flex align-items-stretch">
         <p><i class="bi bi-clock-history h1"></i>  <strong>Guaranteed response time </strong></p>
      </div>
      <div class="col-sm d-flex align-items-stretch">
         <p><i class="bi bi-check2-circle h1"></i>  <strong>Remote assistance support </strong></p>
      </div>
    </div>
    <form role="form" id="addtocart" name="addtocart" method="post" action="/add_to_cart">	
       <div class="row">
           <div class="col-md-12 text-center">
               <div class="">
                   <input type="hidden" name="pro_support" value="on">
                   <input type="hidden" name="prod_type_id" value="0">
                   <div class="btn-info"><span>From </span>$249
                   <button type="submit" class="btn btn-primary">Buy now</button></div>
               </div>
           </div>
       </div>
   </form>
</section>



  <footer class="py-3 my-4">
    <div class="row" style="background-image: radial-gradient(circle at top right,#08088A,#58A2FA 50%);">
      <div class="col-sm m-4">
        <img src="images/turtleZ_color.png" height="2 rem" style="float:left; margin: 5px;">
        <p class=""> &copy  <span class="text-white fw-bold h4"> Zeroturtle </span>, 2008-2025 </p>
      </div>
      <div class="col-sm m-4">
        <h4 class="text-white-50">Quick Links</h4>
        <ul class="list-unstyled">
          <li class="mb-2"><a href="about.html" class="link-light link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-75-hover">Home</a></li>
          <li class="mb-2"><a href="download.html" class="link-light link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-75-hover">Download</a></li>
          <li class="mb-2"><a href="licence.html" class="link-light link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-75-hover">Service</a></li>
          <li class="mb-2"><a href="contact.html" class="link-light link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-75-hover">Contact</a></li>
        </ul>
      </div>
    </div>
  </footer>

</div> <!--container-->


</body>
</html>
